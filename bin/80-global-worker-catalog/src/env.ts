// TEAM-457: Environment configuration for Hono worker catalog
// Cloudflare Workers use a different env pattern (bindings)
// TEAM-481: Env type is now auto-generated by `wrangler types` from wrangler.jsonc
// See: worker-configuration.d.ts

type CloudflareEnv = Env

/**
 * Get environment with automatic dev/prod detection
 * In Cloudflare Workers, env is passed via bindings
 */
export function getEnv(env: CloudflareEnv) {
  const isDev = env.ENVIRONMENT === 'development'
  const isProd = env.ENVIRONMENT === 'production'

  return {
    // Environment flags
    isDev,
    isProd,
    environment: env.ENVIRONMENT,

    // CORS configuration
    corsOrigin: env.CORS_ORIGIN,

    // Computed values
    allowedOrigins: isDev
      ? ['http://localhost:7823', 'http://localhost:7822', 'http://localhost:7811']
      : ['https://marketplace.rbee.dev', 'https://rbee.dev', 'https://docs.rbee.dev'],
  } as const
}

export type WorkerEnv = ReturnType<typeof getEnv>
